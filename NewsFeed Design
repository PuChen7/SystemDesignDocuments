<mxfile host="app.diagrams.net" modified="2020-12-21T13:24:38.397Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="QNIkkggPN7NzNXtoJgh8" version="14.1.1" type="github">
  <diagram id="9UxCTChI39LjHxLQ3wh1" name="Page-1">
    <mxGraphModel dx="944" dy="769" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <UserObject label="Users" lucidchartObjectId="QBWU41hIpI~G" id="22OkZJAC-GyzddD_1iB5-5">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=11;fontColor=#333333;align=center;spacing=3;strokeColor=#333333;strokeOpacity=100;fillOpacity=100;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="200" y="360" width="60" height="48" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;div style=&quot;display: flex; justify-content: center; text-align: center; align-items: baseline; font-size: 0; line-height: 1;&quot;&gt;&lt;span style=&quot;font-size:11px;&quot;&gt;&lt;span style=&quot;font-size:11px;color:#333333;&quot;&gt;Load &#xa;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;display: flex; justify-content: center; text-align: center; align-items: baseline; font-size: 0; line-height: 1;&quot;&gt;&lt;span style=&quot;font-size:11px;&quot;&gt;&lt;span style=&quot;font-size:11px;color:#333333;&quot;&gt;Balancer&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" lucidchartObjectId="-BWUQ6zbnBDL" id="22OkZJAC-GyzddD_1iB5-6">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=11;spacing=3;strokeColor=#333333;strokeOpacity=100;fillOpacity=100;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="324" y="324" width="48" height="120" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="gCWU9.8nCaij" id="22OkZJAC-GyzddD_1iB5-7">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.01;exitY=0.5;exitPerimeter=0;entryX=-0.012;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-5" target="22OkZJAC-GyzddD_1iB5-6" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <mxCell id="22OkZJAC-GyzddD_1iB5-8" value="request" style="text;html=1;resizable=0;labelBackgroundColor=#ffffff;align=center;verticalAlign=middle;fontColor=#333333;;fontSize=11;" parent="22OkZJAC-GyzddD_1iB5-7" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;div style=&quot;display: flex; justify-content: center; text-align: center; align-items: baseline; font-size: 0; line-height: 1;&quot;&gt;&lt;span style=&quot;font-size:11px;&quot;&gt;&lt;span style=&quot;font-size:11px;color:#333333;&quot;&gt;Tweets Writer&#xa;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;display: flex; justify-content: center; text-align: center; align-items: baseline; font-size: 0; line-height: 1;&quot;&gt;&lt;span style=&quot;font-size:11px;&quot;&gt;&lt;span style=&quot;font-size:11px;color:#333333;&quot;&gt;Service&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" lucidchartObjectId="sCWUScaBmAsA" id="22OkZJAC-GyzddD_1iB5-9">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=11;spacing=3;strokeColor=#333333;strokeOpacity=100;fillOpacity=100;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="468" y="324" width="72" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="Metadata" lucidchartObjectId="PDWUIH0lvM8U" id="22OkZJAC-GyzddD_1iB5-10">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;aspect=fixed;html=1;points=[];align=center;verticalAlign=top;image;image=img/lib/mscae/Database_General.svg;whiteSpace=wrap;fontSize=11;spacing=0;strokeColor=#333333;strokeOpacity=100;fillColor=#59B4D9;" parent="1" vertex="1">
            <mxGeometry x="804" y="216" width="36" height="48" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="EEWUQwXaZbZF" id="22OkZJAC-GyzddD_1iB5-11">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.013;exitY=0.25;exitPerimeter=0;entryX=-0.008;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-6" target="22OkZJAC-GyzddD_1iB5-9" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="NEWU8qQi9eh~" id="22OkZJAC-GyzddD_1iB5-12">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.008;exitY=0.5;exitPerimeter=0;entryX=0;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-9" target="22OkZJAC-GyzddD_1iB5-10" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="File System" lucidchartObjectId="vFWUTrfjpAQn" id="22OkZJAC-GyzddD_1iB5-13">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;aspect=fixed;html=1;points=[];align=center;verticalAlign=top;image;image=img/lib/mscae/Database_General.svg;whiteSpace=wrap;fontSize=11;spacing=0;strokeColor=#333333;strokeOpacity=100;fillColor=#59B4D9;" parent="1" vertex="1">
            <mxGeometry x="804" y="288" width="36" height="48" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="FFWUVQ06p_8X" id="22OkZJAC-GyzddD_1iB5-14">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.008;exitY=0.5;exitPerimeter=0;entryX=0;entryY=0.678;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-9" target="22OkZJAC-GyzddD_1iB5-13" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="Timeline Service" lucidchartObjectId="fGWUp68dDsc1" id="22OkZJAC-GyzddD_1iB5-15">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=11;fontColor=#333333;align=center;spacing=3;strokeColor=#333333;strokeOpacity=100;fillOpacity=100;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="468" y="432" width="72" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="FGWU9Lg5wKGF" id="22OkZJAC-GyzddD_1iB5-16">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.013;exitY=0.5;exitPerimeter=0;entryX=-0.008;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-6" target="22OkZJAC-GyzddD_1iB5-15" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="LGWUTWgVaObR" id="22OkZJAC-GyzddD_1iB5-17">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=-0.008;exitY=0.5;exitPerimeter=0;entryX=1.013;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-15" target="22OkZJAC-GyzddD_1iB5-6" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="Timeline Storage (Redis)" lucidchartObjectId="THWUibijkjfU" id="22OkZJAC-GyzddD_1iB5-18">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=11;fontColor=#333333;align=center;spacing=3;strokeColor=#333333;strokeOpacity=100;fillOpacity=100;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="780" y="426" width="84" height="72" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="9HWUAHAMpxPB" id="22OkZJAC-GyzddD_1iB5-19">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.008;exitY=0.5;exitPerimeter=0;entryX=-0.007;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-15" target="22OkZJAC-GyzddD_1iB5-18" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="_HWUW.YMQTPG" id="22OkZJAC-GyzddD_1iB5-20">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=-0.007;exitY=0.5;exitPerimeter=0;entryX=1.008;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-18" target="22OkZJAC-GyzddD_1iB5-15" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <mxCell id="22OkZJAC-GyzddD_1iB5-21" value="Get Timeline " style="text;html=1;resizable=0;labelBackgroundColor=#ffffff;align=center;verticalAlign=middle;fontColor=#333333;;fontSize=11;" parent="22OkZJAC-GyzddD_1iB5-20" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="" lucidchartObjectId="3IWUa1DRmsbu" id="22OkZJAC-GyzddD_1iB5-22">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=1.008;exitY=0.5;exitPerimeter=0;entryX=-0.007;entryY=0.194;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-9" target="22OkZJAC-GyzddD_1iB5-18" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points" />
            </mxGeometry>
          </mxCell>
        </UserObject>
        <mxCell id="22OkZJAC-GyzddD_1iB5-23" value="Fanout, update new tweet to all related users" style="text;html=1;resizable=0;labelBackgroundColor=#ffffff;align=center;verticalAlign=middle;fontColor=#333333;;fontSize=11;" parent="22OkZJAC-GyzddD_1iB5-22" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="22OkZJAC-GyzddD_1iB5-24" value="fanout to only low profile user, and active user" style="text;html=1;resizable=0;labelBackgroundColor=#ffffff;align=center;verticalAlign=middle;fontColor=#333333;;fontSize=11;" parent="22OkZJAC-GyzddD_1iB5-22" vertex="1">
          <mxGeometry x="0.12192118226600956" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="Redis stores all users timeline.&#xa;&#xa;key: userid&#xa;value: list of tweets id of timeline" lucidchartObjectId="jMWUZFfz.agL" id="22OkZJAC-GyzddD_1iB5-25">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;whiteSpace=wrap;fontSize=10;spacing=3;strokeColor=none;fillColor=#FFECA9;strokeWidth=0;" parent="1" vertex="1">
            <mxGeometry x="888" y="408" width="96" height="96" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="" lucidchartObjectId="~NWUsE52iHzb" id="22OkZJAC-GyzddD_1iB5-26">
          <mxCell style="html=1;jettySize=18;whiteSpace=wrap;fontSize=11;strokeColor=#333333;strokeOpacity=100;rounded=1;arcSize=24;edgeStyle=orthogonalEdgeStyle;startArrow=none;;endArrow=block;endFill=1;;exitX=0.5;exitY=1.01;exitPerimeter=0;entryX=1;entryY=0.5;entryPerimeter=0;" parent="1" source="22OkZJAC-GyzddD_1iB5-15" target="22OkZJAC-GyzddD_1iB5-10" edge="1">
            <mxGeometry width="100" height="100" relative="1" as="geometry">
              <Array as="points">
                <mxPoint x="504" y="522" />
                <mxPoint x="876" y="522" />
                <mxPoint x="876" y="240" />
              </Array>
            </mxGeometry>
          </mxCell>
        </UserObject>
        <mxCell id="22OkZJAC-GyzddD_1iB5-27" value="After query Redis for all tweets id in the timeline, we query db for actual content" style="text;html=1;resizable=0;labelBackgroundColor=#ffffff;align=center;verticalAlign=middle;fontColor=#333333;;fontSize=11;" parent="22OkZJAC-GyzddD_1iB5-26" vertex="1">
          <mxGeometry x="-0.3100991792784391" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="Newsfeed" lucidchartObjectId="LSWUBOQQrZtG" id="22OkZJAC-GyzddD_1iB5-32">
          <mxCell style="html=1;overflow=block;whiteSpace=wrap;;whiteSpace=wrap;fontSize=32;fontColor=#333333;fontStyle=1;align=center;spacing=3;strokeOpacity=0;fillOpacity=0;fillColor=#ffffff;" parent="1" vertex="1">
            <mxGeometry x="276" y="228" width="144" height="45" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
